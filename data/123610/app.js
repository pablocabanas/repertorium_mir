const images = [{src: "images/test/001v.png", transcription: [{cantusid: "002085", text: "Custodit dominus omnes diligentes se", melody: "f f f gh g g fe e f g f ", cost: 0.7749999999999999, height: 0.127058, heightmax: 0.127058},{cantusid: "003583", text: "Laudabo deum meum in vita mea", melody: "f fe d f f gh g g eg gf e e ", cost: 0.6793103448275862, height: 0.196751, heightmax: 0.196751},{cantusid: "830243.7", text: "Elias tali creavit", melody: "f fe d f f gh g g eg gf e e ", cost: 0.3333333333333333, height: 0.196751, heightmax: 0.196751},{cantusid: "002148", text: "Deo nostro jucunda sit laudatio", melody: "i j h gf g h i h h fg g f g gh f ", cost: 0.8023041474654378, height: 0.270464, heightmax: 0.270464},{cantusid: "001734", text: "Benedixit filiis tuis in te", melody: "i j h gf g h i h h fg g f g gh f g fe d f g g f g gf f fg c d fghg fg g gj j ", cost: 0.7555555555555555, height: 0.270464, heightmax: 0.338316},{cantusid: "006583", text: "Ecce dies veniunt dicit dominus et suscitabo David germen justum et regnabit rex et sapiens erit et faciet judicium et justitiam in terra et hoc est nomen quod vocabunt eum dominus justus noster", melody: "g fe d f g g f g gf f fg c d fghg fg g gj j ji hjg gghg f g i i hijh ih g hjihg hjh gf gh jg i hihg f g hghgg i hijh ih g fg gfef dc fghg fg g fh jj jjh iihg hg gh gh g g f gh j i hjihghg f g ghj j hg g hjihg f g hghgf h g gh gf gh jk jijkj j ji jkjij hg fg g g hjihi hg d fe fg d efedcd dc g hghgfe fg g hjihi hg ", cost: 0.7280224929709466, height: 0.338316, heightmax: 0.704051},{cantusid: "006583a", text: "In diebus illis salvabitur Juda et Israel habitabit confidenter", melody: "j j j j ji jkj ijhhg h jh jj hj g jih hg g hj hg gh g g g hjihg hjh g gh i hghgg hgj g gh gf g ", cost: 0.819047619047619, height: 0.775843, heightmax: 0.775843},],},{src: "images/test/002r.png", transcription: [{cantusid: "006583a", text: "In diebus illis salvabitur Juda et Israel habitabit confidenter", melody: "j j j j ji jkj ijhhg h jh jj hj g jih hg g hj hg gh g g g hjihg hjh g gh i hghgg hgj g gh gf g ", cost: 0.819047619047619, height: 0.11217, heightmax: 0.11217},{cantusid: "h03480a", text: "Et ponam", melody: "g g g hjihg hjh g gh i hghgg hgj g gh gf g ", cost: 0.4375, height: 0.11217, heightmax: 0.11217},{cantusid: "002527", text: "Ecce nomen domini venit de longinquo et claritas ejus replet orbem terrarum", melody: "f dc f g f gh h hiji jkj hjh g f fgh hg g g e g hg fg fe dc dg e fe d d ", cost: 0.7008888888888889, height: 0.1909, heightmax: 0.260209},{cantusid: "006342za", text: "Immania enim", melody: "g g e g hg fg fe dc dg e fe d d dg fe d efedc df d df f i fg hihg hg ", cost: 0.4166666666666667, height: 0.260209, heightmax: 0.336239},{cantusid: "g00474d", text: "Gaudete", melody: "dg fe d efedc df d df f i fg hihg hg ", cost: 0.42857142857142855, height: 0.336239, heightmax: 0.336239},{cantusid: "001074", text: "Ecce venit rex occurramus obviam salvatori nostro", melody: "dg fe d efedc df d df f i fg hihg hg gfe de e df f gh gf g e e g h h h h g ", cost: 0.7857142857142857, height: 0.336239, heightmax: 0.40329},{cantusid: "g01108g", text: "Venite exultemus", melody: "gfe de e df f gh gf g e e g h h h h g ", cost: 0.75, height: 0.40329, heightmax: 0.40329},{cantusid: "a01555", text: "Non fuit", melody: "gfe de e df f gh gf g e e g h h h h g ", cost: 0.375, height: 0.40329, heightmax: 0.40329},{cantusid: "003134", text: "Hora est jam nos de somno surgere et aperti sunt oculi nostri surgere ad Christum quia lux vera est fulgens in caelis", melody: "e g g h j i j hg e fg g g g g j j k j ih ij h j j ihg hj g g g g gh f ef d g hjh j g g ", cost: 0.6568376068376068, height: 0.480597, heightmax: 0.627511},{cantusid: "g00845e", text: "Libera me", melody: "d g hjh j g g ", cost: 0.4444444444444444, height: 0.627511, heightmax: 0.627511},{cantusid: "006129", text: "Aspiciens a longe ecce video dei potentiam venientem et nebulam totam terram tegentem ite obviam ei et dicite nuntia nobis si tu es ipse qui regnaturus es in populo Israel", melody: "g f gffe fg gihgfg g igihgfgf g g ih ij j g gi h ijiih gh ihi hg g g fg fe de ef gfg fei hi ij hijih g jhi ji ij j g i h ijiih gh ihi hg g hih ghgf fghg hjh g f gd efedcddc g gf gif f g hghih f g g hgh fgf fd f gh g gf fh gefedcfedcdfd ed e fh h ihhgf hi jkjiji i i h ih g hi f eh hhgfh ", cost: 0.6052631578947368, height: 0.700479, heightmax: 0.771762},],},{src: "images/test/002v.png", transcription: [{cantusid: "006129", text: "Aspiciens a longe ecce video dei potentiam venientem et nebulam totam terram tegentem ite obviam ei et dicite nuntia nobis si tu es ipse qui regnaturus es in populo Israel", melody: "g f gffe fg gihgfg g igihgfgf g g ih ij j g gi h ijiih gh ihi hg g g fg fe de ef gfg fei hi ij hijih g jhi ji ij j g i h ijiih gh ihi hg g hih ghgf fghg hjh g f gd efedcddc g gf gif f g hghih f g g hgh fgf fd f gh g gf fh gefedcfedcdfd ed e fh h ihhgf hi jkjiji i i h ih g hi f eh hhgfh ", cost: 0.6052631578947368, height: 0.106511, heightmax: 0.329092},{cantusid: "006129a", text: "Quique terrigenae et filii hominum simul in unum dives et pauper", melody: "h hjig hgfe hffe i jkji hihhg h hi h h i hi hi i i jkjj hg fgffe fgf g gh g g hghgf gf f g hg hjh g fg hgh gefe ", cost: 0.8035560344827586, height: 0.396034, heightmax: 0.47199},{cantusid: "006129b", text: "Qui regis Israel intende qui deducis velut ovem Joseph qui sedes super cherubim", melody: "hg fgffe fgf g gh g g hghgf gf f g hg hjh g fg hgh gefe i jkji hihhg h h h h h h ik h h hi h h ig fg fg g hih hg fgffe fgf g g hghgfg f g hg hjh g fg hgh gefe ", cost: 0.8076962025316456, height: 0.47199, heightmax: 0.615276},{cantusid: "006129c", text: "Tollite portas principes vestras et elevamini portae aeternales et introibit", melody: "i jkji hg hihhg h h h h h hi h h h h hi h h f ge fg fg g hih hg g hghgf gf f g hg hjh gfg hgh gefe c df ", cost: 0.8552631578947368, height: 0.687356, heightmax: 0.687356},],},{src: "images/test/003r.png", transcription: [{cantusid: "006129c", text: "Tollite portas principes vestras et elevamini portae aeternales et introibit", melody: "i jkji hg hihhg h h h h h hi h h h h hi h h f ge fg fg g hih hg g hghgf gf f g hg hjh gfg hgh gefe c df ", cost: 0.8552631578947368, height: 0.133149, heightmax: 0.133149},{cantusid: "h03686a", text: "Sicut juravit", melody: "f ge fg fg g hih hg g hghgf gf f g hg hjh gfg hgh gefe c df ", cost: 0.3076923076923077, height: 0.133149, heightmax: 0.133149},{cantusid: "203121", text: "Mirens haec", melody: "f ge fg fg g hih hg g hghgf gf f g hg hjh gfg hgh gefe c df ", cost: 0.36363636363636365, height: 0.133149, heightmax: 0.133149},{cantusid: "006128", text: "Aspiciebam in visu noctis et ecce in nubibus caeli filius hominis venit et datum est ei regnum et honor et omnis populus tribus et linguae servient ei", melody: "fihh c d fg fefgf f i fg hihg h h hgh gf fh ih ij kjjg f gf f g h ghg f ghgfg gf d fgf fe g gh jih fgf f f g hgh j k ij hj g f gh hgfe f gfg gf g fdf df cd d fg f g hgh h h i hihg h h hgh gf fg hghgfed ffg gh ghg f ghgfg gf fg ihihghg g hj jk ji i gi f f gihg gf ", cost: 0.6421666666666667, height: 0.202622, heightmax: 0.489955},{cantusid: "006056a", text: "Ecce dominator dominus cum virtute veniet", melody: "ghg f ghgfg gf fg ihihghg g hj jk ji i gi f f gihg gf f f gif gf fgi hg hihg ghgfgf f g hgh gh g g ", cost: 0.7195121951219512, height: 0.489955, heightmax: 0.563676},{cantusid: "201507b", text: "Et ego", melody: "f f gif gf fgi hg hihg ghgfgf f g hgh gh g g ", cost: 0.5, height: 0.563676, heightmax: 0.563676},{cantusid: "007170", text: "Missus est Gabriel angelus ad Mariam virginem desponsatam Joseph nuntians ei verbum et expavescit virgo de lumine ne timeas Maria invenisti gratiam apud dominum ecce concipies et paries et vocabitur altissimi filius", melody: "f f gif gf fgi hg hihg ghgfgf f g hgh gh g g ef e e fh hihh h i jij ji g hi ih i hi ghgff fe fhe feed f h hghf ed efede efe e e e e e ei i g igihgfgf g g g ih ij j g i g j jihghg fg ghggff ff g hghjh g fedc dfede dc d e f e f e d e f ghf f ef gfg gf i h h i jij hi ih i hg hi fe efhefeed d fh h ihhgf hi jkji ji i ii fh g hihgf ghgf e e fhgfef fe ", cost: 0.7589036544850498, height: 0.563676, heightmax: 0.781553},],},{src: "images/test/003v.png", transcription: [{cantusid: "007170", text: "Missus est Gabriel angelus ad Mariam virginem desponsatam Joseph nuntians ei verbum et expavescit virgo de lumine ne timeas Maria invenisti gratiam apud dominum ecce concipies et paries et vocabitur altissimi filius", melody: "f f gif gf fgi hg hihg ghgfgf f g hgh gh g g ef e e fh hihh h i jij ji g hi ih i hi ghgff fe fhe feed f h hghf ed efede efe e e e e e ei i g igihgfgf g g g ih ij j g i g j jihghg fg ghggff ff g hghjh g fedc dfede dc d e f e f e d e f ghf f ef gfg gf i h h i jij hi ih i hg hi fe efhefeed d fh h ihhgf hi jkji ji i ii fh g hihgf ghgf e e fhgfef fe ", cost: 0.7589036544850498, height: 0.12832, heightmax: 0.268348},{cantusid: "007170a", text: "Ave Maria gratia plena dominus tecum", melody: "i jkji hihhg h hi h ig hi hi ijkj ji i jijihih h i jijkj i hi jij hghg i h h cd fg ghgfef dcd dff df fh jgf ", cost: 0.8888888888888888, height: 0.337083, heightmax: 0.410829},{cantusid: "006569", text: "Ecce", melody: "hghg i h h cd fg ghgfef dcd dff df fh jgf ", cost: 1.0, height: 0.410829, heightmax: 0.410829},{cantusid: "008167", text: "Paratum cor meum", melody: "hghg i h h cd fg ghgfef dcd dff df fh jgf ", cost: 0.3125, height: 0.410829, heightmax: 0.410829},{cantusid: "007177", text: "Montes Israel ramos vestros expandite et florete et fructus facite prope est ut veniat dies domini", melody: "hghg i h h cd fg ghgfef dcd dff df fh jgf hg hj h h g hgfef gfgfe e d e fef ed d ff d efedcd fdc f gi hj h hfg hg ghgfgf f gh hggf g fe dc c eghg gfgfed d dfedcd d de fef ed h h hghggf g g gh g g g g hf ", cost: 0.7091836734693877, height: 0.410829, heightmax: 0.627139},{cantusid: "006641c", text: "Rorate caeli desuper et nubes pluant justum aperiatur terra et germinet salvatorem", melody: "d dfedcd d de fef ed h h hghggf g g gh g g g g hf g gh i hih h gf gh h h h hj h h h h hghg h fg hg hjh hgfe gh gf f gh f dc df d c d ", cost: 0.8658536585365854, height: 0.627139, heightmax: 0.769089},{cantusid: "h04598", text: "P", melody: "fg hg hjh hgfe gh gf f gh f dc df d c d ", cost: 1.0, height: 0.769089, heightmax: 0.769089},{cantusid: "g00113c", text: "In ore meo", melody: "fg hg hjh hgfe gh gf f gh f dc df d c d ", cost: 0.4, height: 0.769089, heightmax: 0.769089},{cantusid: "003967", text: "Nox praecessit dies autem appropinquabit abiciamus ergo opera tenebrarum et induamur arma lucis sicut in die honeste ambulemus", melody: "fg hg hjh hgfe gh gf f gh f dc df d c d ef g ef g fe d d dc f g hj h h h h h hgfg ed e e e g gh hj h h gf gf fg ef g g dc e f g gf e e i gh hghggf fh ", cost: 0.8063492063492064, height: 0.769089, heightmax: 0.769089},],},{src: "images/test/004r.png", transcription: [{cantusid: "003967", text: "Nox praecessit dies autem appropinquabit abiciamus ergo opera tenebrarum et induamur arma lucis sicut in die honeste ambulemus", melody: "fg hg hjh hgfe gh gf f gh f dc df d c d ef g ef g fe d d dc f g hj h h h h h hgfg ed e e e g gh hj h h gf gf fg ef g g dc e f g gf e e i gh hghggf fh ", cost: 0.8063492063492064, height: 0.116049, heightmax: 0.262253},{cantusid: "g00639c", text: "Eripe me de manu", melody: "e f g gf e e i gh hghggf fh ", cost: 0.34375, height: 0.262253, heightmax: 0.262253},{cantusid: "h04025", text: "Q", melody: "e f g gf e e i gh hghggf fh ", cost: 1.0, height: 0.262253, heightmax: 0.262253},{cantusid: "800040", text: "Beati autem", melody: "e f g gf e e i gh hghggf fh ", cost: 0.36363636363636365, height: 0.262253, heightmax: 0.262253},{cantusid: "006157", text: "Ave Maria gratia plena dominus tecum spiritus sanctus superveniet in te et virtus altissimi obumbrabit tibi quod enim ex te nascetur sanctum vocabitur filius dei", melody: "e f g gf e e i gh hghggf fh h kih g h ihi ih h hg hi hg h ighgfefe hh fh g hihgf ghgf e fhgfef fe c c g g g igihgfgf g g ih ij jk g cgi hiji iihghg gf ff ff g hg hjh fd fg higf f f gefedc dc c f c gfgfed f fgff ff e ef fefeed d fh h ihhgf hi jkjiji i ihhf h hg hi fe e f hefe ed hh fh g hihg f ghgf e fhgfeffe i jkji hg hihh h h ", cost: 0.6925465838509317, height: 0.262253, heightmax: 0.630101},{cantusid: "006157a", text: "Quomodo fiet istud quoniam virum non cognosco et respondens angelus dixit ei", melody: "fe e f hefe ed hh fh g hihg f ghgf e fhgfeffe i jkji hg hihh h h hi h h h h h i hi hi ijkj ji hihhg hih i i g g g hghgf gf fg hg hjh g fg hgh gefe c g g g g hj j ", cost: 0.7912280701754386, height: 0.630101, heightmax: 0.778096},{cantusid: "h00267d", text: "Excelsus", melody: "g g g hghgf gf fg hg hjh g fg hgh gefe c g g g g hj j ", cost: 0.4375, height: 0.778096, heightmax: 0.778096},{cantusid: "007562", text: "Salvatorem exspectamus dominum Jesum Christum qui reformavit corpus humilitatis nostrae configuratum corpori claritatis suae", melody: "g g g hghgf gf fg hg hjh g fg hgh gefe c g g g g hj j h f fhh e fhgfheedf f gh h h ij g f gh g fhg gff ff f f f gh g h hg hjh gf g hj jjig jk jihi hg h h h h h h hj g ff hjg f fdfd f ghg h gfg g h jghg egee fe j j j j jkjjh ", cost: 0.6008064516129032, height: 0.778096, heightmax: 0.778096},],},{src: "images/test/004v.png", transcription: [{cantusid: "007562", text: "Salvatorem exspectamus dominum Jesum Christum qui reformavit corpus humilitatis nostrae configuratum corpori claritatis suae", melody: "g g g hghgf gf fg hg hjh g fg hgh gefe c g g g g hj j h f fhh e fhgfheedf f gh h h ij g f gh g fhg gff ff f f f gh g h hg hjh gf g hj jjig jk jihi hg h h h h h h hj g ff hjg f fdfd f ghg h gfg g h jghg egee fe j j j j jkjjh ", cost: 0.6008064516129032, height: 0.111089, heightmax: 0.255692},{cantusid: "007562a", text: "Praeoccupemus faciem ejus in confessione et in psalmis jubilemus ei", melody: "h hj g ff hjg f fdfd f ghg h gfg g h jghg egee fe j j j j jkjjh h ijihhg ij h h h h h h h j jkjj jj jg hj j i j j j jkjji hiji hg g hj jijh jihghhg f f e g h j ", cost: 0.7371002132196163, height: 0.255692, heightmax: 0.400108},{cantusid: "h04025", text: "Q", melody: "j jkjji hiji hg g hj jijh jihghhg f f e g h j ", cost: 1.0, height: 0.400108, heightmax: 0.400108},{cantusid: "006149", text: "Audite verbum domini gentes et annuntiate illud in finibus terrae et in insulis quae procul sunt dicite salvator noster adveniet", melody: "j jkjji hiji hg g hj jijh jihghhg f f e g h j i h g fh g f gff e g hj i jk kjjih hij g hg h j j ih jihihh hg g h j h j gh g g f gh fe dff j jkjj h ijihh fd f gh i hihgf gh g g h jghg efgee fe j jkjj h ijihh ", cost: 0.53125, height: 0.400108, heightmax: 0.617898},{cantusid: "001888a", text: "A solis ortu et occasu ab aquilone et mari", melody: "fd f gh i hihgf gh g g h jghg efgee fe j jkjj h ijihh h hg h j ikjj jj j j j jkjji hiji hg g hj jijh jihgh hg g h ", cost: 0.7619047619047619, height: 0.617898, heightmax: 0.687968},{cantusid: "007584za", text: "Et impetum", melody: "h hg h j ikjj jj j j j jkjji hiji hg g hj jijh jihgh hg g h ", cost: 0.4, height: 0.687968, heightmax: 0.687968},{cantusid: "002675", text: "Erumpant montes jucunditatem et colles justitiam quia lux mundi dominus cum potentia venit", melody: "g geed efed d hi f ghgff g ihihg f h j ghji hg hh iji ih j jijhgf fg hg hj h f g hg hj hj i i h ijih gff f f fgdg gf j g g hj g g hjih ij ghg g j ji jkj ijhhg jj hj ", cost: 0.6611111111111111, height: 0.763147, heightmax: 0.763147},],},{src: "images/test/005r.png", transcription: [{cantusid: "002675", text: "Erumpant montes jucunditatem et colles justitiam quia lux mundi dominus cum potentia venit", melody: "g geed efed d hi f ghgff g ihihg f h j ghji hg hh iji ih j jijhgf fg hg hj h f g hg hj hj i i h ijih gff f f fgdg gf j g g hj g g hjih ij ghg g j ji jkj ijhhg jj hj ", cost: 0.6611111111111111, height: 0.118365, heightmax: 0.191505},{cantusid: "006672za", text: "De Sion exibit lex et verbum domini de Jerusalem", melody: "gf j g g hj g g hjih ij ghg g j ji jkj ijhhg jj hj g hjih hg g f g gh g g hjihg hjh ghf g fg ig hihg fhjgfefe ", cost: 0.7291666666666666, height: 0.191505, heightmax: 0.263664},{cantusid: "h03540", text: "Perfice", melody: "g hjih hg g f g gh g g hjihg hjh ghf g fg ig hihg fhjgfefe ", cost: 0.42857142857142855, height: 0.263664, heightmax: 0.263664},{cantusid: "002201", text: "Dicite filiae Sion ecce rex tuus veniet tibi Sion noli timere ecce rex tuus veniet", melody: "e fg g i f gi hg fg g f g i hgf f gh h g g hj jkhh h j k jihg g f g h ij hg f gh hg g ", cost: 0.6158536585365854, height: 0.339482, heightmax: 0.408112},{cantusid: "h01105f", text: "Reple deus", melody: "h j k jihg g f g h ij hg f gh hg g ", cost: 0.4, height: 0.408112, heightmax: 0.408112},{cantusid: "006620", text: "Ecce virgo concipiet et pariet filium dicit dominus et vocabitur nomen ejus admirabilis deus fortis", melody: "g g h j j j ih h g j i h jih ij g ff hf gh hjgfghg e fgff ff f f e gh g g g gh h gfghg j j h j ijihg ff hf gh hjgf ghg egee fe k jkjj hiji hg ij h hh ", cost: 0.8012987012987013, height: 0.484807, heightmax: 0.631747},{cantusid: "006620a", text: "Tollite portas principes vestras et elevamini portae aeternales et introibit", melody: "h j ijihg ff hf gh hjgf ghg egee fe k jkjj hiji hg ij h hh h h hj h h h h hj h h h hg h j jkjj jj jkj jih hii h g hj jijh jihghhg j j h f hj j kjih hijkj jjk ", cost: 0.7421052631578947, height: 0.631747, heightmax: 0.780733},{cantusid: "205163", text: "Versis ad", melody: "hii h g hj jijh jihghhg j j h f hj j kjih hijkj jjk ", cost: 0.3333333333333333, height: 0.780733, heightmax: 0.780733},{cantusid: "007305", text: "Obsecro domine mitte quem missurus es vide afflictionem populi tui sicut locutus es veni et libera nos", melody: "hii h g hj jijh jihghhg j j h f hj j kjih hijkj jjk j hfg gh hgg hfg f e f gfg gf f gh h hj h hg hggf f hj jk kjjih kjjihijh h f h j ij hg h hgh f g g hg f ghgf ", cost: 0.6372549019607843, height: 0.780733, heightmax: 0.780733},],},{src: "images/test/005v.png", transcription: [{cantusid: "007305", text: "Obsecro domine mitte quem missurus es vide afflictionem populi tui sicut locutus es veni et libera nos", melody: "hii h g hj jijh jihghhg j j h f hj j kjih hijkj jjk j hfg gh hgg hfg f e f gfg gf f gh h hj h hg hggf f hj jk kjjih kjjihijh h f h j ij hg h hgh f g g hg f ghgf ", cost: 0.6372549019607843, height: 0.113951, heightmax: 0.187563},{cantusid: "a00472d", text: "Deo", melody: "gf j j jkj ihjh j jh hj ij j ijkjk kj f h j jjj jh ", cost: 0.3333333333333333, height: 0.256416, heightmax: 0.256416},{cantusid: "001888a", text: "A solis ortu et occasu ab aquilone et mari", melody: "gf j j jkj ihjh j jh hj ij j ijkjk kj f h j jjj jh j ijkihhih h f e ef fh hghif hg fe f h gfef f hihhg ", cost: 0.7857142857142857, height: 0.256416, heightmax: 0.330215},{cantusid: "g01014e", text: "Dicat nunc", melody: "j ijkihhih h f e ef fh hghif hg fe f h gfef f hihhg ", cost: 0.35, height: 0.330215, heightmax: 0.330215},{cantusid: "007068", text: "Laetentur caeli et exsultet terra jubilate montes laudem quia dominus noster veniet et pauperum suorum miserebitur", melody: "j ijkihhih h f e ef fh hghif hg fe f h gfef f hihhg f ghgfg hf h iji j i h hi hihhgfg hf fh f fh f f h h he f e e ef h hi ihh hi i ighgfefe fhgf h hghf hf ef ghgfg hf ef hi h h hg hi gh f fghg hf f f f ghgfef ", cost: 0.7256253537068478, height: 0.330215, heightmax: 0.547915},{cantusid: "007068a", text: "Ecce dominator dominus cum virtute veniet", melody: "hf ef hi h h hg hi gh f fghg hf f f f ghgfef g hih hgfhg fe ef h hi g g f fg c d fghg fg g ", cost: 0.9102787456445993, height: 0.547915, heightmax: 0.622104},{cantusid: "h03480a", text: "Et ponam", melody: "g hih hgfhg fe ef h hi g g f fg c d fghg fg g ", cost: 0.5, height: 0.622104, heightmax: 0.622104},{cantusid: "008353", text: "Nunc aureum", melody: "g hih hgfhg fe ef h hi g g f fg c d fghg fg g ", cost: 0.36363636363636365, height: 0.622104, heightmax: 0.622104},{cantusid: "006569", text: "Ecce", melody: "g hih hgfhg fe ef h hi g g f fg c d fghg fg g ", cost: 1.0, height: 0.622104, heightmax: 0.622104},{cantusid: "800187", text: "Haec dies", melody: "g hih hgfhg fe ef h hi g g f fg c d fghg fg g ", cost: 0.5555555555555556, height: 0.622104, heightmax: 0.622104},{cantusid: "601167", text: "In velamento", melody: "g hih hgfhg fe ef h hi g g f fg c d fghg fg g ", cost: 0.4583333333333333, height: 0.622104, heightmax: 0.622104},{cantusid: "h03353c", text: "Sitivit anima", melody: "g hih hgfhg fe ef h hi g g f fg c d fghg fg g g g fg g f g g g g hj g h gf f f g h ", cost: 0.38461538461538464, height: 0.622104, heightmax: 0.693429},{cantusid: "003244", text: "In illa die stillabunt montes dulcedinem et colles fluent lac et mel alleluia", melody: "g g fg g f g g g g hj g h gf f f g h j g h g gfed e fg g g g f g gh jkj i j kjk kj ji h ij ", cost: 0.8027597402597403, height: 0.693429, heightmax: 0.765036},{cantusid: "003509", text: "Jucundare filia Sion exsulta satis filia Jerusalem alleluia", melody: "j g h g gfed e fg g g g f g gh jkj i j kjk kj ji h ij hg g g g g fe d f f gh h g fg gfed e fg g g g jh j ", cost: 0.7649394673123486, height: 0.765036, heightmax: 0.765036},],},{src: "images/test/006r.png", transcription: [{cantusid: "003509", text: "Jucundare filia Sion exsulta satis filia Jerusalem alleluia", melody: "j g h g gfed e fg g g g f g gh jkj i j kjk kj ji h ij hg g g g g fe d f f gh h g fg gfed e fg g g g jh j ", cost: 0.7649394673123486, height: 0.117365, heightmax: 0.117365},{cantusid: "006586", text: "Ecce dominus veniet et omnes sancti ejus cum eo et erit in die illa lux magna et exibunt de Jerusalem sicut aqua munda et regnabit dominus in aeternum super omnes gentes", melody: "hg g g g g fe d f f gh h g fg gfed e fg g g g jh j j jgk h g f g g f g h j k k j j h j j j i j h fg g g i i gi f f ig ij i i g iji hg f ", cost: 0.6504437869822486, height: 0.117365, heightmax: 0.263814},{cantusid: "h03713b", text: "Qui vult mei", melody: "i j h fg g g i i gi f f ig ij i i g iji hg f ", cost: 0.4166666666666667, height: 0.263814, heightmax: 0.263814},{cantusid: "004133", text: "Omnes sitientes venite ad aquas quaerite dominum dum inveniri potest alleluia", melody: "i j h fg g g i i gi f f ig ij i i g iji hg f e f dc d c g h ij i i hi h g g c f g f df ihg hj hj g g d e f gh h gh i hg h h h ", cost: 0.7191558441558441, height: 0.263814, heightmax: 0.411443},{cantusid: "002552", text: "Ecce veniet propheta magnus et ipse renovabit Jerusalem alleluia", melody: "ihg hj hj g g d e f gh h gh i hg h h h e h f g ed e d c d ef g f e e f f f ed ", cost: 0.7745192307692308, height: 0.411443, heightmax: 0.485433},{cantusid: "007728", text: "Super te Jerusalem orietur dominus", melody: "e h f g ed e d c d ef g f e e f f f ed e f g e f dc d e e e d dff f f f f f ", cost: 0.8823529411764706, height: 0.485433, heightmax: 0.55827},{cantusid: "007728a", text: "Et gloria ejus in te videbitur", melody: "e f g e f dc d e e e d dff f f f f f ed e f g e f dc g g g gh h h g h f f f f fe d ef ", cost: 0.7617391304347826, height: 0.55827, heightmax: 0.631909},{cantusid: "h04025", text: "Q", melody: "ed e f g e f dc g g g gh h h g h f f f f fe d ef ", cost: 1.0, height: 0.631909, heightmax: 0.631909},{cantusid: "003645g", text: "Gloria patri et filio et spiritui sancto", melody: "ed e f g e f dc g g g gh h h g h f f f f fe d ef g f f f gd f f gh g g g ", cost: 0.55, height: 0.631909, heightmax: 0.705567},{cantusid: "h02690c", text: "Intende", melody: "g f f f gd f f gh g g g ", cost: 0.6428571428571429, height: 0.705567, heightmax: 0.705567},{cantusid: "006898za", text: "Justi autem", melody: "g f f f gd f f gh g g g ", cost: 0.4090909090909091, height: 0.705567, heightmax: 0.705567},{cantusid: "005006", text: "Spiritus sanctus in te descendet Maria ne timeas habebis in utero filium dei alleluia", melody: "g f f f gd f f gh g g g g g hg f gh h h hj hg g g h g f f e d h h h g", cost: 0.7552941176470588, height: 0.705567, heightmax: 0.778763},{cantusid: "h01763a", text: "Cantemus", melody: "g g hg f gh h h hj hg g g h g f f e d h h h g", cost: 0.5, height: 0.778763, heightmax: 0.778763},],},];

const suggested = [];
let currentIndex = 0;

const imageElement = document.getElementById("image");
const transcriptionContainer = document.getElementById("transcription");
const highlightElement = document.getElementById("highlight");

function loadImage(index) {
    const { src, transcription } = images[index];
    const sugerencias = suggested[index]

    // Set the image source
    imageElement.src = src;

    // Clear existing transcription
    transcriptionContainer.innerHTML = "";

    // Add new transcription lines
    transcription.forEach((line, i) => {
        const lineElement = document.createElement("div");

	const linkElement = document.createElement("a");
	linkElement.href = `https://cantusindex.org/id/${line.cantusid}`;
	linkElement.textContent = line.cantusid;
	linkElement.target = "_blank"; // new tab
	linkElement.rel = "noopener noreferrer"; // security

        // lineElement.textContent = line.text;
	lineElement.appendChild(document.createTextNode("("));
	lineElement.appendChild(linkElement);
	lineElement.appendChild(document.createTextNode(") "));
	lineElement.appendChild(document.createTextNode(line.text));
	const costElement = document.createElement("span");
	costElement.textContent = line.cost;
	if (line.cost > 0.5) {
    		costElement.style.color = "darkgreen";
	} else {
    		costElement.style.color = "lightgreen";
		lineElement.style.backgroundColor = "lightcoral"
	}
	lineElement.appendChild(document.createTextNode(" ("));
	lineElement.appendChild(costElement);
	lineElement.appendChild(document.createTextNode(") "));
	
	const lineBreak = document.createElement("br");
	lineElement.appendChild(lineBreak);
	const additionalText = document.createElement("span");
	additionalText.textContent = line.melody;
	additionalText.style.fontFamily = "Courier, monospace";
	lineElement.appendChild(additionalText);

        lineElement.style.marginBottom = "10px";
        lineElement.addEventListener("mouseover", () => showHighlight(line.height, line.heightmax));
        lineElement.addEventListener("mouseout", () => hideHighlight());
        transcriptionContainer.appendChild(lineElement);
    });

    // Add new suggestion
    sugerencias.forEach(entry => {
  	const lineElement = document.createElement("div");
	const linkElement = document.createElement("a");
	linkElement.href = `https://cantusindex.org/id/${entry}`;
	linkElement.textContent = entry;
	linkElement.target = "_blank"; // new tab
	linkElement.rel = "noopener noreferrer"; // security
	lineElement.appendChild(linkElement);
	transcriptionContainer.appendChild(lineElement);
    });

}

function showHighlight(height, heightmax) {
    const imgRect = imageElement.getBoundingClientRect();
    const highlightHeight = height * imgRect.height;

    highlightElement.style.top = `${imgRect.top + window.scrollY + highlightHeight}px`;
    //highlightElement.style.height = "20px"; // Adjust for line thickness
    highlightElement.style.height = `${imgRect.height * (heightmax-height) + 40}px`;; // Adjust for line thickness
    highlightElement.style.display = "block";
}

function hideHighlight() {
    highlightElement.style.display = "none";
}

document.getElementById("prev").addEventListener("click", () => {
    if (currentIndex > 0) {
        currentIndex--;
	const numberElement = document.getElementById("number");
	numberElement.textContent = currentIndex;
        loadImage(currentIndex);
    }
});

document.getElementById("next").addEventListener("click", () => {
    if (currentIndex < images.length - 1) {
        currentIndex++;
	const numberElement = document.getElementById("number");
	numberElement.textContent = currentIndex;
        loadImage(currentIndex);
    }
});

// Load the first image
loadImage(currentIndex);
